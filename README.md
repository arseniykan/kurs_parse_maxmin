
# Курсы Валют Парсинг с использованием Apache Airflow

Этот проект реализует парсинг страницы [kurs.kz](https://kurs.kz/) для получения самого дорогого и самого дешевого курсов валют (независимо от валюты, то есть находит максимальное и минимальное значение на сайте). Проект использует Apache Airflow для оркестрации задач и выполняется в контейнере Docker.

## Описание

Скрипт парсит страницу [kurs.kz](https://kurs.kz/) и находит максимальные и минимальные значения курса валют на сайте. Результат работы скрипта выводится в логах Airflow.

## Установка и запуск

### Требования

- Docker
- Docker Compose

### Шаги для установки и запуска проекта

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/arseniykan/kurs_parse_maxmin.git
    cd kurs_parse_maxmin
    ```

2. **Постройте Docker образ:**

    ```bash
    docker-compose build
    ```

3. **Запустите Docker Compose:**

    ```bash
    docker-compose up -d
    ```

4. **Инициализируйте базу данных Airflow:**

    ```bash
    docker-compose run airflow-init
    ```

5. **Перейдите в веб-интерфейс Airflow:**

    Откройте веб-браузер и перейдите по адресу [http://localhost:8080](http://localhost:8080).

6. **Активируйте и запустите DAG:**

    В веб-интерфейсе Airflow найдите DAG `parse_kurs_dag`, активируйте его и запустите вручную, если необходимо.

## Структура проекта

```
kurs_parse_maxmin/
├── dags/
│   └── parse_kurs_dag.py
├── Dockerfile
└── docker-compose.yaml
```

### Файлы

- **`dags/parse_kurs_dag.py`**: Содержит код для DAG, который парсит страницу и находит максимальные и минимальные значения курса валют.
- **`Dockerfile`**: Определяет Docker образ, используемый для выполнения DAG.
- **`docker-compose.yaml`**: Конфигурация Docker Compose для запуска сервисов Airflow, PostgreSQL и Redis.

## Инструкции по использованию

1. После запуска всех контейнеров и инициализации базы данных, перейдите в веб-интерфейс Airflow по адресу [http://localhost:8080](http://localhost:8080).
2. Найдите DAG с именем `parse_kurs_dag`, активируйте его и запустите вручную, если необходимо.
3. Логи выполнения задачи можно просмотреть в веб-интерфейсе Airflow для получения результатов парсинга.

## Лицензия

Этот проект лицензирован под [MIT License](https://opensource.org/licenses/MIT).
